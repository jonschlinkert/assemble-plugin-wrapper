# assemble-plugin-wrapper [![NPM version](https://badge.fury.io/js/assemble-plugin-wrapper.svg)](http://badge.fury.io/js/assemble-plugin-wrapper)  [![Build Status](https://travis-ci.org/doowb/assemble-plugin-wrapper.svg)](https://travis-ci.org/doowb/assemble-plugin-wrapper)

> Makes it easy for plugin authors to generalize assemble plugins. Assemble has three types of plugins: app, collection and view. This makes it easy to specify one or more of those types to use for your plugin.

Install with [npm](https://www.npmjs.com/)

```sh
$ npm i assemble-plugin-wrapper --save
```

## Usage

```js
var wrap = require('assemble-plugin-wrapper');
```

**Before**

Let's say you want to create a permalinks plugin. To generate a permalink, you need to modify the destination path of a `view`, which means you would need to actually modify each view before it's rendered.

Here is what a `view` plugin looks like:

```js
var app = assemble();

// create a plugin
function permalinks(options) {
  return function (view) {
    // do stuff to generate permalink...
  };
}

// then use it on a view (this works well when you 
// loop over views to render then)
app.page('a/b/c.hbs', {content: 'some contents'})
  .use(permalink(':dest/:name.html'))
  .render(function(err, view) {
    // rendered view
  });
```

**After**

```js
// create a `view` plugin
function permalinks(options) {
  return plugin('view', function (view) {
    // do stuff to generate permalink...
  });
}

// pass it to `app` intead of each `view`. 
// consider this the "default" config for the plugin
var app = assemble()
  .use(permalink(':dest/:name.html'))

// if you want you can still use the plugin on each view 
// if you need to override the settings passed to `app`
app.page('a/b/c.hbs', {content: 'some contents'})
  .render(function(err, view) {
    // rendered view
  });
```

## API

### [wrapper](index.js#L36)

Wrap a plugin function to easily use it with the specified type (e.g. app, collection, view, or any)

**Params**

* `pluginType` **{String}**: The type specifying where this plugin should be use.
* `pluginType.app` **{String}**: Only use on the `app`
* `pluginType.collection` **{String}**: Only use on view collections.
* `pluginType.view` **{String}**: Only use on view instances.
* `pluginType.any` **{String}**: Use with any of the plugin types.
* `fn` **{Function}**: Function to use as the plugin. This will be executed in the context of the specified plugin type object (e.g. app, collection, view)
* `returns` **{Function}**: Plugin function that may be passed to `.use` methods on app, collection, and/or view instances

**Example**

```js
app.use(wrapper('any', function () {
  this.foo = function (str) {
    return 'foo-' + str;
  };
}));

app.foo('bar');
//=> 'foo-bar'
```

## Related projects

* [assemble](https://www.npmjs.com/package/assemble): Static site generator for Grunt.js, Yeoman and Node.js. Used by Zurb Foundation, Zurb Ink, H5BP/Effeckt,… [more](https://www.npmjs.com/package/assemble) | [homepage](http://assemble.io)
* [templates](https://www.npmjs.com/package/templates): System for creating and managing template collections, and rendering templates with any node.js template engine.… [more](https://www.npmjs.com/package/templates) | [homepage](https://github.com/jonschlinkert/templates)
* [verb](https://www.npmjs.com/package/verb): Documentation generator for GitHub projects. Verb is extremely powerful, easy to use, and is used… [more](https://www.npmjs.com/package/verb) | [homepage](https://github.com/verbose/verb)

## Running tests

Install dev dependencies:

```sh
$ npm i -d && npm test
```

## Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/doowb/assemble-plugin-wrapper/issues/new).

## Author

**Brian Woodward**

+ [github/doowb](https://github.com/doowb)
+ [twitter/doowb](http://twitter.com/doowb)

## License

Copyright © 2015 Brian Woodward
Released under the MIT license.

***

_This file was generated by [verb-cli](https://github.com/assemble/verb-cli) on September 13, 2015._
